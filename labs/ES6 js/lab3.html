<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<select id="dropdown">
    <option value="">Select a user</option>
</select>
<button id="button" onclick="showImage()" disabled>show image</button>

<div id="userDetails" style="margin-top: 20px; display: none;"></div>
    <script>
        //1)
        function getUsers(){
            fetch("https://dummyjson.com/users")
            .then(response => response.json())
            .then(data => {
                console.log(data);
                for(let user of data.users){
                    let option = document.createElement("option");
                    option.value = user.id;
                    option.textContent = user.firstName + " " + user.lastName;
                    dropdown.appendChild(option);
                }
                // Enable button after users are loaded
                document.getElementById("button").disabled = false;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
        getUsers();
       //b)
       async function showImage(){
        if(!dropdown.value) {
            alert("Please select a user first!");
            return;
        }
        
        await fetch(`https://dummyjson.com/users/${dropdown.value}`)
         .then(response => response.json())
        .then(data => {
            console.log(data);
            // Display user details
            let userDetailsDiv = document.getElementById("userDetails");
            userDetailsDiv.style.display = "block";
            userDetailsDiv.innerHTML = `
                <h3>${data.firstName} ${data.lastName}</h3>
                <p><strong>Email:</strong> ${data.email}</p>
                <p><strong>Phone:</strong> ${data.phone}</p>
                <p><strong>Age:</strong> ${data.age}</p>
                <p><strong>Address:</strong> ${data.address.address}, ${data.address.city}, ${data.address.state}</p>
                <p><strong>Company:</strong> ${data.company.name}</p>
            `;
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }   

    //2
    //1
   function addNewPost(){
    fetch("https://dummyjson.com/posts/add",{
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            title: "foo",
            body: "bar",
            userId: 1
        })
    })
    .then(response => response.json())
    .then(data => {
        //check post is added successfully return this object with id, title, body, userId
        console.log(data);
    })
    .catch(error => {
        console.error('Error:', error);
    });
    }
    addNewPost();


    
    </script>
</body>
</html>